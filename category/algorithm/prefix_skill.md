Prefix Skill:

å‰ç¼€æŠ€å·§åˆ‡å…¥ç‚¹æ˜¯æƒ³è¦å¿«é€Ÿè·å–æŸä¸ªåŒºé—´çš„çŠ¶æ€ï¼Œå‘æ•£ä¸€ä¸‹ï¼ŒæŸä¸ªåŒºé—´å¯ä»¥æ˜¯æ•°ç»„çš„ [j, i)åŒºé—´ï¼Œ å¯ä»¥æ˜¯æ ‘éå†ä¸‹çš„æŸä¸ªå­éå†åŒºé—´ç­‰

çŠ¶æ€å¯ä»¥æ˜¯ ã€å’ŒçŠ¶æ€ã€‘ï¼Œ ä¹Ÿå¯ä»¥æ˜¯ã€åŒºé—´ä¸­æŸä¸ªå€¼çš„ä¸ªæ•°çŠ¶æ€ã€‘ç­‰

å½“è§£é¢˜æ€è·¯é€’è¿›é“æ‹¥æœ‰ğŸ‘†çš„æƒ³æ³•æ—¶å€™ï¼Œå°±ç›´æ¥å¥—æ¨¡ç‰ˆå§, å› ä¸ºä½¿ç”¨å‰ç¼€æŠ€å·§ï¼Œæ›´å¤šæ˜¯ç»†èŠ‚çš„å¤„ç†å’Œåœºæ™¯çš„å¤„ç†ï¼Œæ¯”å¦‚åŒºé—´èŒƒå›´çš„åˆ’åˆ†ï¼Œ
é€šè¿‡ä»€ä¹ˆæ•°æ®ç»“æ„ä¿å­˜çŠ¶æ€ï¼Œä»¥ä¾¿äºå¿«é€ŸæŸ¥æ‰¾ï¼Œé€‰ç”¨çš„æ•°æ®ç»“æ„å­˜ä»€ä¹ˆï¼Œå¯ä»¥æ»¡è¶³æˆ‘ä»¬éœ€è¦å¿«é€ŸæŸ¥æ‰¾çš„æ¡ä»¶ï¼Œæ‰æ˜¯æ¯”è¾ƒéš¾çš„
éƒ¨åˆ†ã€‚

è€Œå‰ç¼€çš„æ¨¡æ¿æ˜¯ä»€ä¹ˆå‘¢ ï¼Ÿ (è¿™é‡Œæ’ä¸€å¥ï¼šæ¨¡æ¿ç°åœ¨åœ¨æˆ‘è¿™é‡Œçš„å®šä¹‰å¯ä»¥ç†è§£ä¸ºæ•°æ®å…¬å¼ï¼Œä¸Šå‡åˆ°é“ä¹‰ï¼Œä¸‡ç‰©çš†æ•°å­¦)

```go
// å¤§å¤šæ•°æƒ…å†µä¸‹å¯ä»¥æ˜¯è¿™ä¸ªæŠ½è±¡
 Status[j,i) = Status[0, i) - Status[0, j)
è®¾ ï¼š prefixStatus[x] = Status[0,x)
==> Status[j,i) = prefixStatus[i] - prefixStatus[j]
//è§£é‡Šä¸€ä¸‹è¿™é‡Œç”¨å·¦å¼€å³é—­çš„åŸå› æ˜¯ï¼Œ[0,0) å¯ä»¥å¤„ç†è¾¹ç•Œå€¼çš„æƒ…å†µï¼Œè®©è·å–å‰ç¼€çŠ¶æ€å¯ä»¥ä»0å¼€å§‹ï¼Œ[0,0) ä»£è¡¨æ²¡æœ‰å€¼
(i-j) ä»£è¡¨ [j, i) çš„çŠ¶æ€
```

ä¸ºäº†ä½“ç°å‰ç¼€æ€è·¯çš„å±‚æ¬¡é€’è¿›ï¼Œä»æœ€çº¯ç²¹çš„å¼€å§‹ï¼Œæ…¢æ…¢åˆ°å˜å¼
```go
//724. å¯»æ‰¾æ•°ç»„çš„ä¸­å¿ƒä¸‹æ ‡
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œè¯·è®¡ç®—æ•°ç»„çš„ ä¸­å¿ƒä¸‹æ ‡ ã€‚
//
//æ•°ç»„ ä¸­å¿ƒä¸‹æ ‡ æ˜¯æ•°ç»„çš„ä¸€ä¸ªä¸‹æ ‡ï¼Œå…¶å·¦ä¾§æ‰€æœ‰å…ƒç´ ç›¸åŠ çš„å’Œç­‰äºå³ä¾§æ‰€æœ‰å…ƒç´ ç›¸åŠ çš„å’Œã€‚
//
//å¦‚æœä¸­å¿ƒä¸‹æ ‡ä½äºæ•°ç»„æœ€å·¦ç«¯ï¼Œé‚£ä¹ˆå·¦ä¾§æ•°ä¹‹å’Œè§†ä¸º 0 ï¼Œå› ä¸ºåœ¨ä¸‹æ ‡çš„å·¦ä¾§ä¸å­˜åœ¨å…ƒç´ ã€‚è¿™ä¸€ç‚¹å¯¹äºä¸­å¿ƒä¸‹æ ‡ä½äºæ•°ç»„æœ€å³ç«¯åŒæ ·é€‚ç”¨ã€‚
//
//å¦‚æœæ•°ç»„æœ‰å¤šä¸ªä¸­å¿ƒä¸‹æ ‡ï¼Œåº”è¯¥è¿”å› æœ€é è¿‘å·¦è¾¹ çš„é‚£ä¸€ä¸ªã€‚å¦‚æœæ•°ç»„ä¸å­˜åœ¨ä¸­å¿ƒä¸‹æ ‡ï¼Œè¿”å› -1 ã€‚


æŠ½è±¡çš„çŠ¶æ€æ˜¯ï¼šf(idx) = {sum[0, idx) == sum(idx, len(nums))}
å…¬å¼ï¼šStatus[idx] = sum[0, idx) == sum(idx, len(nums)) ä¸ºtrue
è®¾: prefixSum[x] = sum[0, x)
åˆ™ï¼š sum[0, idx) == sum(idx, len(nums))
	==> prefixSum[idx] == prefixSum[len(nums)] - prefixSum[idx] - nums[idx]


func f(nums []int) int {
	prefixSum := make([]int, len(nums)+1) // +1 æ˜¯ä¸ºäº† ç”¨prefixSum[0] ä¿å­˜ åŸæ•°ç»„ [0,0) çš„çŠ¶æ€, åŸæ•°ç»„ä¸­[0, 0) è¿™ä¸ªæ—¶å€™å…¶å®æ˜¯æ²¡çŠ¶æ€çš„
	for idx, it := range nums {
		prefixSum[idx+1] = prefixSum[idx] + it
    }
	
	for idx := 0; idx < len(nums); idx++ {
		//sum[0, idx) == sum(idx, len(nums))
	    if prefixSum[idx] == prefixSum[len(prefixSum)-1] - prefixSum[idx] - nums[idx] {
			return idx
		} 
    }
	return -1
}
```

ä¸çŸ¥é“çœ‹å®ŒğŸ‘†çš„ç®€å•é¢˜ï¼Œæ˜¯å¦å¯¹æ•°æ®å…¬ç¤ºçš„é­”åŠ›æœ‰æ‰€éœ‡æ’¼å‘¢ï¼Ÿåæ­£æˆ‘å†™å®Œæˆ‘æ˜¯æœäº†å“ˆå“ˆå“ˆ, è®©æˆ‘ä»¬keep going on
```go
//238. é™¤è‡ªèº«ä»¥å¤–æ•°ç»„çš„ä¹˜ç§¯
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œè¿”å› æ•°ç»„ answer ï¼Œå…¶ä¸­ answer[i] ç­‰äº nums ä¸­é™¤ nums[i] ä¹‹å¤–å…¶ä½™å„å…ƒç´ çš„ä¹˜ç§¯ ã€‚
//
//é¢˜ç›®æ•°æ® ä¿è¯ æ•°ç»„ numsä¹‹ä¸­ä»»æ„å…ƒç´ çš„å…¨éƒ¨å‰ç¼€å…ƒç´ å’Œåç¼€çš„ä¹˜ç§¯éƒ½åœ¨  32 ä½ æ•´æ•°èŒƒå›´å†…ã€‚
//
//è¯·ä¸è¦ä½¿ç”¨é™¤æ³•ï¼Œä¸”åœ¨ O(n) æ—¶é—´å¤æ‚åº¦å†…å®Œæˆæ­¤é¢˜ã€‚

æŠ½è±¡çš„çŠ¶æ€æ˜¯ï¼šf(idx) = {multiply[0, idx) * multiply(idx, len(nums))}
å…¬å¼ï¼šStatus[idx] = multiply[0, idx) * multiply(idx, len(nums)) 
è®¾: prefixProduct[x] = multiply[0, x)
åˆ™ï¼š multiply[0, idx) * multiply(idx, len(nums))

åˆ°è¿™é‡Œç®€ç›´å’Œä¸Šé¢çš„ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å¯èƒ½è¿™é¢˜å›°éš¾ä¸€ä¸¢ä¸¢çš„åœ°æ–¹å°±åœ¨äºmultiply(idx, len(nums)) å¦‚ä½• è¡¨ç¤ºå§
'.'  not use divided 
.'.  multiply(idx, len(nums)) != prefixProduct[len(nums)]/prefixProduct[idx]
     é‚£å°±åªèƒ½æ‰“ç›´çƒäº†ï¼Œç›´æ¥ æ±‚ multiply(idx, len(nums)) ï¼Œä½†æ˜¯æ¯æ¬¡å¾ªç¯æ±‚ (idx, len(nums))çš„ä¹˜ç§¯æ˜¯ä¸æ˜¯ä¹Ÿå’ŒprefixProduct ä¸€æ ·äº†
.'.  è®¾ suffixProduct[idx] = multiply[idx, len(nums))ï¼Œ è¿˜æ˜¯ä¸ºäº†å¯ä»¥è®©suffixProductå¤„ç†è¾¹ç•Œæƒ…å†µ

multiply[0, idx) * multiply(idx, len(nums)) 
==> prefixProduct[idx] * suffixProduct[idx+1] 

func f(nums []int) []int {
    prefixProduct := make([]int, len(nums)+1) // +1 æ˜¯ä¸ºäº† ç”¨prefixSum[0] ä¿å­˜ åŸæ•°ç»„ [0,0) çš„çŠ¶æ€, åŸæ•°ç»„ä¸­[0, 0) è¿™ä¸ªæ—¶å€™å…¶å®æ˜¯æ²¡çŠ¶æ€çš„
    suffixProduct := make([]int, len(nums)+1) 
	prefixProduct[0] = 1
	suffixProduct[len(nums)] = 1
    for idx, it := range nums {
        prefixSum[idx+1] = prefixSum[idx] * it
		suffixProduct[len(nums)-idx-1] = suffixProduct[len(nums)-idx] * it
    }
    res := make([]int, len(nums))
    for idx := 0; idx < len(nums); idx++ {
		res[idx] = prefixSum[idx] * suffixProduct[idx+1]
    }
    return res
}
```

ä»¥ä¸Šå¯èƒ½éƒ½è¿˜æ˜¯ç”¨ä¸€ä¸ªprefix array å¯ä»¥æå®šçš„ï¼Œç°åœ¨æˆ‘ä»¬è¿›é˜¶ä¸€äº›éœ€æ±‚

```go
//525. è¿ç»­æ•°ç»„
//ç»™å®šä¸€ä¸ªäºŒè¿›åˆ¶æ•°ç»„ nums , æ‰¾åˆ°å«æœ‰ç›¸åŒæ•°é‡çš„ 0 å’Œ 1 çš„æœ€é•¿è¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›è¯¥å­æ•°ç»„çš„é•¿åº¦ã€‚

Status[i, j) = cnt(0) == cnt(1) => cnt(0) - cnt(1) == 0
éš¾ç‚¹åœ¨äºæ€ä¹ˆæŠ½è±¡è¿™ä¸ªåŒºé—´çš„çŠ¶æ€åˆ°å‰ç¼€çš„æŠ€å·§ä¸Šï¼Œ å…¶å®å…³é”®åœ¨äºè¿™æ˜¯ä¸€ä¸ª cnt(0) == cnt(1) ç­‰å¼ï¼Œä¸ğŸ‘†çš„ç­‰å¼ä¸åŒçš„æ˜¯è¿™ä¸ªç­‰å¼ä¸¤è¾¹ä¸å¤ªå¥½ä¸€æ¬¡æ€§æ±‚å‡ºï¼Œ
å‰é¢çš„ç­‰å¼ä¸¤è¾¹éƒ½ç›´æ¥æˆ–è€…é—´æ¥å’Œprefix æŒ‚é’©ï¼Œè¿™é‡Œå°±è¦çµæ´»è½¬ä¸€ä¸‹ï¼Œå°†åŸæ•°ç»„çš„0å˜æˆ-1, ç„¶åè¿™ä¸ªç­‰å¼å°±å¯ä»¥æ¯”è¾ƒå·§å¦™çš„è½¬æˆ
Status[i,j) = sum[i, j) == 0 
è®¾ï¼šprefixSum[x] = sum[0, x)
åˆ™ï¼š Status[i,j) = sum[i, j) == 0 ==> prefixSum[j] - prefixSum[i] == 0

code ç•¥ï¼Œso easy

//523. è¿ç»­çš„å­æ•°ç»„å’Œ
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥åˆ¤æ–­è¯¥æ•°ç»„æ˜¯å¦å«æœ‰åŒæ—¶æ»¡è¶³ä¸‹è¿°æ¡ä»¶çš„è¿ç»­å­æ•°ç»„ï¼š
//
//å­æ•°ç»„å¤§å° è‡³å°‘ä¸º 2 ï¼Œä¸”
//å­æ•°ç»„å…ƒç´ æ€»å’Œä¸º k çš„å€æ•°ã€‚
//å¦‚æœå­˜åœ¨ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚
//
//å¦‚æœå­˜åœ¨ä¸€ä¸ªæ•´æ•° n ï¼Œä»¤æ•´æ•° x ç¬¦åˆ x = n * k ï¼Œåˆ™ç§° x æ˜¯ k çš„ä¸€ä¸ªå€æ•°ã€‚0 å§‹ç»ˆè§†ä¸º k çš„ä¸€ä¸ªå€æ•°ã€‚
//1 <= nums.length <= 10^5
//0 <= nums[i] <= 10^9
//0 <= sum(nums[i]) <= 2^31 - 1
//1 <= k <= 2^31 - 1


Status[j, i) = sum[j, i) % k == 0 && i-j>=2
è®¾: prefixSum[x] = sum[0, x) 
åˆ™ï¼šsum[j, i) % k == 0 && i-j>=2
==> (prefixSum[0, i) - prefixSum[0, j)) % k == 0 && i-j>=2
==> prefixSum[0, i) % k == prefixSum[0, j) % k && i-j>=2
è¿™é‡Œå›°éš¾å¯èƒ½å°±æ˜¯åœ¨äº å¦‚ä½• æ±‚çš„j å­˜åœ¨ä¸å¦äº†å§ï¼Œä¸ğŸ‘†ä¸åŒçš„æ˜¯ï¼Œä¸Šé¢åªéœ€è¦æ±‚çš„ i ä¸‹æ»¡è¶³æŸä¸ªæ¡ä»¶å°±è¡Œï¼Œè¿™é‡Œ
æ˜¯éœ€è¦æ±‚å¾— [j, i) æ»¡è¶³çš„æ¡ä»¶, å¹¶ä¸”i-j>=2 ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨èƒ½å¾ˆå¿«å¾—åˆ° prefixSum[0, i) çš„æƒ…å†µå’‹å¾ˆå¿«å¾—åˆ° prefixSum[0, j) ç»“åˆ
æ»¡è¶³ä¸Šé¢çš„å¼å­, å½“ç„¶hashMap å°±å¾ˆå¥½æƒ³åˆ°äº†

é‚£hashMap å­˜ä»€ä¹ˆï¼Œåšä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å¿«é€Ÿæ‰¾åˆ°æ˜¯j ï¼Œé‚£ value ä¸€å®šæ˜¯true or false, key å…¶å®å°±æ˜¯ prefixSum[0, j) % k,
æœ€åmap åˆ¤æ–­å°±è¡Œäº†, è¿™é‡Œå†è®²ä¸€ä¸ªå°æŠ€å·§ï¼ŒæŸ¥map çš„è¿‡ç¨‹æ˜¯å‘å‰çœ‹çš„è¿‡ç¨‹ï¼Œå¯ä»¥è¾¹æ±‚prefixï¼Œ è¾¹æŸ¥mapï¼Œè¿™ä¸ªæŠ€å·§å¦‚æœä½ è¦é—®æˆ‘
æ€ä¹ˆæƒ³åˆ°çš„ï¼Œæˆ‘åªèƒ½è¯´ï¼Œä¼˜åŒ–çš„æ€æƒ³ä¸€å®šè¦æœ‰ï¼Œå…¶æ¬¡å°±æ˜¯ç†Ÿèƒ½ç”Ÿå·§ï¼Œåˆ«çš„æ²¡äº†

func f(nums []int, k int)  bool {
    prefixSum, prefixSumMap := make([]int, len(nums)+1), make(map[int]struct{})// i-2 >= j
    //  0 <= sum(nums[i]) <= 2^31 - 1 å¯ä»¥ç”¨int è¡¨ç¤º hashMap ä¸­çš„key, å› ä¸ºvalue åªéœ€è¦T/F
    for idx, it := range nums {
      prefixSum[idx+1] = prefixSum[idx]+ it
    }
    for idx := 1; idx < len(nums); idx ++ {
        prefixSumMap[prefixSum[idx-1]%k] = struct{}{} // i - j ä¹‹é—´éœ€è¦æœ‰ä¸€å®šçš„åŒºé—´å·®
        //  prefixSum[0, j) % k è¿™ä¸ªkey æ˜¯å¦å­˜åœ¨ æ‰€ä»¥å¯ä»¥åœ¨è¿™ä¸ªæ—¶å€™åˆ¤æ–­
        if _, exist := prefixSumMap[prefixSum[idx+1]%k]; exist {
        return true
        }    
	}
    return false
}

//560. å’Œä¸º K çš„å­æ•°ç»„
//ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¯·ä½ ç»Ÿè®¡å¹¶è¿”å› è¯¥æ•°ç»„ä¸­å’Œä¸º k çš„è¿ç»­å­æ•°ç»„çš„ä¸ªæ•° ã€‚
//1 <= nums.length <= 2 * 10^4
//-1000 <= nums[i] <= 1000
//-10^7 <= k <= 10^7

ä¹ä¸€çœ‹è¿˜æ˜¯ä¸€ä¸ªæ±‚åŒºé—´å’Œçš„ç®—æ³•ï¼Œä½†æ˜¯æ³¨æ„è¿™é‡Œè¦æ±‚çš„æ˜¯è¿”å›ä¸åœ¨æ˜¯æŸä¸ªæ•°ç»„ä¸­çš„å€¼æˆ–è€…boolï¼Œè€Œæ˜¯ä¸€ä¸ªç»Ÿè®¡å€¼ï¼Œç»Ÿè®¡å€¼å°±ä»£è¡¨æ•°ç»„ä¸­å¯èƒ½å¤šä¸ªåŒºé—´å­˜åœ¨åŒä¸€ä¸ªçŠ¶æ€
ï¼Œè¿™å°±æ¯”è¾ƒæœ‰æ„æ€ï¼Œè™½ç„¶æ•´ä½“æ€è·¯è¿˜æ˜¯æ±‚å’Œï¼Œè¿˜æ˜¯ç®—å‡ºæ»¡è¶³ä¸‹é¢çš„ç­‰å¼çš„çŠ¶æ€

prefixSum[i] - prefix[j] == k

ä½†æ˜¯prefixSum[j] = sum[0, j) è¿™ä¸ªçŠ¶æ€ä¼šæœ‰å¤šä¸ªåŒºé—´ï¼Œä½†æ˜¯è¿˜å¥½æ˜¯ç»Ÿè®¡ï¼Œæ‰€ä»¥ hashMap ä¸­value å¯ä»¥å­˜çš„æ˜¯ sum[0, j) çŠ¶æ€çš„ä¸ªæ•°ï¼Œ æ»¡è¶³çš„åŠ ä¸Š
è¿™ä¸ªä¸ªæ•°å³å¯

func f(nums []int, k int) int {
	prefixSum, prefixSumMap := 0, make(map[int]int, 0)
	res := 0
	prefixSumMap[0] = 1 // æ³¨æ„prefix[0] ==> ä»£è¡¨æœ‰ä¸€ä¸ªçŠ¶æ€ [0, 0) ==> å¯¹åº”çš„mapå°±æ˜¯1
	for i := 0; i < len(nums); i ++ {
		prefixSum += nums[i]
		res += prefixSumMap[prefixSum - k]
		prefixSumMap[prefixSum] ++ 
    }
	return res
}

//974. å’Œå¯è¢« K æ•´é™¤çš„å­æ•°ç»„
//ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° k ï¼Œè¿”å›å…¶ä¸­å…ƒç´ ä¹‹å’Œå¯è¢« k æ•´é™¤çš„ï¼ˆè¿ç»­ã€éç©ºï¼‰ å­æ•°ç»„ çš„æ•°ç›®ã€‚
//
//å­æ•°ç»„ æ˜¯æ•°ç»„çš„ è¿ç»­ éƒ¨åˆ†ã€‚
// 1 <= nums.length <= 3 * 104
//-104 <= nums[i] <= 104
//2 <= k <= 104

å†ä¹ä¸€çœ‹ï¼Œå‘ç°ä¸å°±æ˜¯ğŸ‘†ä¸¤é“é¢˜çš„ç»“åˆé¢˜å˜›ï¼Œæ»¡è¶³åŒºé—´å’Œæ˜¯k çš„å€æ•°ï¼Œå¹¶ä¸”ç»Ÿè®¡å­˜åœ¨çš„æƒ…å†µï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªå¯ä»¥æœ‰ç»Ÿè®¡å€¼å‡ºç°å‘¢ï¼Ÿå…¶å®å°±æ˜¯å› ä¸ºåŸæ•°ç»„å¯æ­£å¯è´Ÿï¼Œæ‰€ä»¥æ»¡è¶³
æŸä¸ªçŠ¶æ€çš„åŒºé—´å¯ä»¥æœ‰å¤šä¸ª
ä¸ä¸Šä¸Šé¢˜ä¸åŒåœ¨äºi-j>=1 å³å¯ï¼Œä¸€ä¸ªå€¼ä¹Ÿæ˜¯æ»¡è¶³éç©ºï¼Œ
ä¸ä¸Šé¢˜ä¸åŒçš„æ˜¯ éœ€è¦æ»¡è¶³çš„æ¡ä»¶æ˜¯ % ,ä¸æ˜¯ç®€å•çš„å’Œï¼Œå¹¶ä¸”åœ¨å–ä½™çš„æƒ…å†µä¸‹, éœ€è¦åˆ¤æ–­å–ä½™ä¹‹åä¸ºè´Ÿæ•°ä¸€å®šè¦+k , æ»¡è¶³ä»–hitåœ¨æ­£æ•°ä¸Š
è´Ÿæ•°çš„åˆ¤æ–­éœ€è¦ç‰¹åˆ«å°å¿ƒï¼Œå…¶ä»–çš„å¾ˆç›¸ä¼¼,é‚£å°±ç›´æ¥ä¸Šcode

func f(nums []int, k int )  int {
    prefixSum, prefixSumMap := 0, make(map[int]int, 0)
	prefixSumMap[0] = 1
	res := 0
	for i := 0; i < len(nums); i ++ {
		prefixSum += nums[i]
		if prefixSum % k < 0 {
			res += prefixSumMap[prefixSum % k + k]
            prefixSumMap[prefixSum % k + k] ++
         }else {
            res += prefixSumMap[prefixSum % k]
			prefixSumMap[prefixSum % k] ++
         }
    }
}
```

åœ¨ä¸€äº›é¢˜ä¸­ï¼Œå¦‚ä½•æŠ½ä¸å‰¥èŒ§åˆ°æˆ‘æƒ³è¦æ±‚åŒºé—´çŠ¶æ€ ï¼Ÿprefix æŠ€å·§çš„æŠ½è±¡æ€è·¯å…»æˆã€‚
```go
//1124. è¡¨ç°è‰¯å¥½çš„æœ€é•¿æ—¶é—´æ®µ
//ç»™ä½ ä¸€ä»½å·¥ä½œæ—¶é—´è¡¨ hoursï¼Œä¸Šé¢è®°å½•ç€æŸä¸€ä½å‘˜å·¥æ¯å¤©çš„å·¥ä½œå°æ—¶æ•°ã€‚
//
//æˆ‘ä»¬è®¤ä¸ºå½“å‘˜å·¥ä¸€å¤©ä¸­çš„å·¥ä½œå°æ—¶æ•°å¤§äº 8 å°æ—¶çš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸€å¤©å°±æ˜¯ã€ŒåŠ³ç´¯çš„ä¸€å¤©ã€ã€‚
//
//æ‰€è°“ã€Œè¡¨ç°è‰¯å¥½çš„æ—¶é—´æ®µã€ï¼Œæ„å‘³åœ¨è¿™æ®µæ—¶é—´å†…ï¼Œã€ŒåŠ³ç´¯çš„å¤©æ•°ã€æ˜¯ä¸¥æ ¼ å¤§äºã€Œä¸åŠ³ç´¯çš„å¤©æ•°ã€ã€‚
//
//è¯·ä½ è¿”å›ã€Œè¡¨ç°è‰¯å¥½æ—¶é—´æ®µã€çš„æœ€å¤§é•¿åº¦ã€‚
//è¾“å…¥ï¼šhours = [9,9,6,0,6,6,9]
//è¾“å‡ºï¼š3
//è§£é‡Šï¼šæœ€é•¿çš„è¡¨ç°è‰¯å¥½æ—¶é—´æ®µæ˜¯ [9,9,6]ã€‚

å…¶å®è¿™é¢˜ä¹Ÿè›®ç®€å•çš„ï¼Œåˆ‡å…¥ç‚¹æ˜¯è¦æ±‚çš„åŒºé—´çŠ¶æ€ã€ŒåŠ³ç´¯çš„å¤©æ•°ã€æ˜¯ä¸¥æ ¼ å¤§äºã€Œä¸åŠ³ç´¯çš„å¤©æ•°ã€å¦‚ä½•ç”¨æ•°å­¦å…¬å¼è¡¨è¾¾ï¼Œç±»ä¼¼ä¸æœ‰ç‚¹åƒæ±‚åŒºé—´ä¸­æŸä¸ªæ•°æ®å­˜åœ¨çš„ä¸ªæ•°è¿™ç±»
çš„é¢˜ã€‚
åˆ¤å®šåŠ³ç´¯çš„ä¸€å¤©æ˜¯1ï¼Œ ä¸åŠ³ç´¯çš„ä¸€å¤©æ˜¯-1 ï¼Œç„¶åç¬¦åˆæ¡ä»¶çš„åŒºé—´çŠ¶æ€å°±æ˜¯è¿™ä¸ªåŒºé—´å’Œå¤§äº0çš„æœ€å¤§é•¿åº¦
sum[j, i) > 0 ==> prefixSum[i] - prefixSum[j] > 0 ==> res = max(res, (i-j))
ä½†æ˜¯æœ‰ä¸€äº›ç»†èŠ‚éœ€è¦è€ƒè™‘

func longestWPI(hours []int) int {
    for i , _ := range hours {
        if hours[i] <= 8 {
            hours[i] = -1
        }else {
            hours[i] = 1
        }
	}
	res := 0
	prefixSum := 0
	prefixSumMap := make(map[int]int, 0)
	prefixSumMap[0] = 0
	for i := 1; i <= len(hours); i ++ {
        prefixSum += hours[i-1]
		// è¿™é‡Œå°±éœ€è¦åˆ†æ­£è´Ÿæ•°è®¨è®ºï¼Œ prefixSum ä¸ºè´Ÿæ•°ï¼Œéœ€è¦æ‰¾åˆ°ä¸€ä¸ªprefixSum[i] - prefixSum[j] > 0 
		//   ==> prefixSum[j] = prefixSum[i]-1  æ˜¯å¦å­˜åœ¨ï¼Ÿ prefixSum[i] > prefixSum[i]-1 æ’æˆç«‹, åœ¨è¿™é‡Œå¯ä»¥è¿™ä¹ˆå¹², ä½†æ˜¯æœ€å¥½çš„æ–¹å¼
		//  è¿˜æ˜¯é€šè¿‡å•è°ƒæ ˆæ±‚ æ»¡è¶³ prefixSum[j] < prefixSum[i] çš„ j 
        if prefixSum > 0 { // 
            res = max(res, i)
        }else if d , exist := prefixSumMap[prefixSum-1]; exist {
            res = max(res, (i-d))
        }
        if _, exist := prefixSumMap[prefixSum] ; !exist {
            prefixSumMap[prefixSum] = i
        }
    }
    return res
}

func max(a, b int) int {
if a > b {
return a
}
return b
}


//437. è·¯å¾„æ€»å’Œ III
//ç»™å®šä¸€ä¸ªäºŒå‰æ ‘çš„æ ¹èŠ‚ç‚¹ root ï¼Œå’Œä¸€ä¸ªæ•´æ•° targetSum ï¼Œæ±‚è¯¥äºŒå‰æ ‘é‡ŒèŠ‚ç‚¹å€¼ä¹‹å’Œç­‰äº targetSum çš„ è·¯å¾„ çš„æ•°ç›®ã€‚
//
//è·¯å¾„ ä¸éœ€è¦ä»æ ¹èŠ‚ç‚¹å¼€å§‹ï¼Œä¹Ÿä¸éœ€è¦åœ¨å¶å­èŠ‚ç‚¹ç»“æŸï¼Œä½†æ˜¯è·¯å¾„æ–¹å‘å¿…é¡»æ˜¯å‘ä¸‹çš„ï¼ˆåªèƒ½ä»çˆ¶èŠ‚ç‚¹åˆ°å­èŠ‚ç‚¹ï¼‰ã€‚
ç›¸å½“äºæ±‚ æ ‘ çš„æŸä¸ª åŒºé—´çš„å’Œï¼Œ é‡‡ç”¨éå†è§£å†³å³å¯

// æ±‚æ•°ç»„ä¸­çš„æŸä¸ªåŒºé—´å’Œæ»¡è¶³åœ¨[x, y] ä¹‹é—´
// è¿™é¢˜æœ‰æ„æ€çš„åœ°æ–¹åœ¨äº çŠ¶æ€çš„æ»¡è¶³å¼å­ æœ‰ä¸¤ä¸ª sum[j, i) >= x && sum[j, i) <= y è·Ÿä¸Šé¢çš„åªæœ‰ä¸€ä¸ªæ»¡è¶³æ¡ä»¶ç¨æ˜¾ä¸åŒ
// æ‰€ä»¥è¿™é“é¢˜çš„å…³é”®æ˜¯ prefixSum[i] æ±‚çš„å ï¼Œå¦‚ä½•æ±‚ j æ˜¯æ»¡è¶³
//   prefixSum[0, i) - prefixSum[0, j) >= x && prefixSum[0, i) - prefixSum[0, j) <= y ?
//   

```


